<script src="/Chart.bundle.min.js"></script>
<script>
var $={};
var jQuery = $;
</script>
<script src="/jquery.csv.min.js"></script>
<canvas id="myChart" width="400" height="400"></canvas>

<script>

var xhr;

function main()
{
	console.log("Loading CSV...");
	xhr = new XMLHttpRequest();
	xhr.onreadystatechange = csv_xml_response;
	xhr.open("GET", "/fermenter/fermenter0_000.csv", true);
	xhr.setRequestHeader('Content-type', 'text/plain');
	xhr.send();
}

function csv_xml_response(e)
{ 
	console.log("XMLHTTP response " + e);
	if (xhr.readyState == 4 && xhr.status == 200)
	{
		console.log("CSV done!");
		csv_loaded(xhr.responseText);
	}
}

function csv_loaded(csv_text) 
{
	console.log("CSV loaded");
	csv_data = $.csv.toArrays(csv_text);
	
	var ctx = document.getElementById("myChart");
    	var myChart = new Chart(ctx, {
    	type: 'line',
    	data: {
        	datasets: [{
            	label: 'Scatter Dataset',
            	data: csv_data
//				[{
//                	x: -10,
//                	y: 0
//            	}, {
//                	x: 0,
//                	y: 10
//            	}, {
//                	x: 10,
//                	y: 5
//            	}]
        	}]
    	},
    	options: {
        	scales: {
            	xAxes: [{
                	type: 'linear',
                	position: 'bottom'
            	}]
        	}
    	}
	});
}

window.onload = main;

</script>
